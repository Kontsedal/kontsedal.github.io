(()=>{"use strict";var t={43:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});const i=n.p+"5a2610394a21c586a65ba14639952315.png"},963:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});const i=n.p+"08bd21b8a4b1c8b849e8966a99d81030.png"},432:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});const i=n.p+"a2b263a683cb29005895f5d72ccd7a26.png"},789:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});const i=n.p+"7beb35bcfc23845a68f9833d4fc56239.jpg"},344:(t,e,n)=>{n.r(e)},507:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONFIG=void 0,e.CONFIG={CANVAS_SELECTOR:".js-canvas",ROCKET:{INITIAL_X:50,INITIAL_Y:200,INITIAL_ANGLE:45,INITIAL_SPEED:150,COLLISION_SPEED_MULTIPLIER:.8,MINIMAL_SPEED:2,SPEED_TO_FIX_ANGLE:20,SIMULATION_SPEED:2,MAX_SIMULATION_SPEED:3,MIN_SIMULATION_SPEED:1,SIMULATION_SPEED_MULTIPLIER:2.5,WIDTH:40,HEIGHT:40},CAMERA:{INITIAL_X:20,INITIAL_Y:-35,MIN_TARGET_OFFSET_X:40,MAX_TARGET_OFFSET_X_PERCENT:.3,MAX_TARGET_OFFSET_Y:200,TRANSITION_COEF:15},WALLS:{OFFSET_X:700,REPEAT_TIMES:40,DISTANCE:400,HEIGHT:200,WIDTH:50},GRAVITY_FORCE:9.8,MAX_COLLISION_DEPTH:20,MOVE_ARROW:{MAX_HEIGHT:300,MIN_HEIGHT:50,MIN_WIDTH:50,MAX_SPEED:300,MIN_SPEED:0},VIEW_REFRESH_SPEED_MS:200}},582:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(479),a=n(54);(function(){return i(this,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return t=new a.Simulation,[4,new o.AppView(t).init()];case 1:return e.sent(),[2]}}))}))})().catch((function(t){console.error("Failed to bootstrap",t)}))},796:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsManager=void 0;var n=function(){function t(){this.assetsQueue=[],this.assetsMap={}}return t.prototype.register=function(t){if(this.assetsMap[t])return this.assetsMap[t];var e=new Image;return e.src=t,this.assetsQueue.push(new Promise((function(t,n){e.onload=t,e.onerror=n}))),e},t.prototype.waitUntilLoaded=function(){return Promise.all(this.assetsQueue)},t}();e.AssetsManager=n},643:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getCollisions=e.getCollision=e.CollisionType=void 0;var i,r=n(507);function o(t,e){var n;if(t!==e&&e.collides&&t.collidable){var o=t.x,a=t.y,s=o+t.width,c=e.x,h=e.y,u=c+e.width/2,l=0,d=a-h,p=c<s&&u>o,f=h<a;return u>o&&c<o&&f&&Math.abs(u-o)<=r.CONFIG.MAX_COLLISION_DEPTH&&(l=u-o,n=i.RIGHT),u>o&&u<s&&h<a&&Math.abs(a-h)<=r.CONFIG.MAX_COLLISION_DEPTH&&(n=i.BOTTOM),p&&f&&Math.abs(s-c)<=r.CONFIG.MAX_COLLISION_DEPTH&&(l=s-c,n=i.LEFT),void 0!==n?{type:n,diffX:l,diffY:d}:void 0}}!function(t){t.RIGHT="RIGHT",t.LEFT="LEFT",t.BOTTOM="BOTTOM"}(i=e.CollisionType||(e.CollisionType={})),e.getCollision=o,e.getCollisions=function(t,e){return t.reduce((function(t,n){var i=o(n,e);return i&&t.push(i),t}),[])}},681:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderContext=void 0;var n=function(){function t(t){var e=this;this.element=document.querySelector(t),this.context=this.element.getContext("2d"),this.element.width=window.innerWidth,this.element.height=window.innerHeight,this.canvasWidth=this.element.clientWidth,this.canvasHeight=this.element.clientHeight,window.addEventListener("resize",(function(){e.element.width=window.innerWidth,e.element.height=window.innerHeight,e.canvasWidth=e.element.clientWidth,e.canvasHeight=e.element.clientHeight}))}return t.prototype.getContext=function(){return this.context},t.prototype.clear=function(){this.getContext().clearRect(0,0,this.canvasWidth,this.canvasHeight)},t.prototype.getWidth=function(){return this.canvasWidth},t.prototype.getHeight=function(){return this.canvasHeight},t}();e.RenderContext=n},45:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderLoop=void 0;var i=n(643),r=function(){function t(t){var e=t.fps,n=void 0===e?60:e,i=t.renderContext;this.animationFrameId=0,this.gameObjects=[],this.frameLengthSeconds=1/n,this.renderContext=i}return t.prototype.start=function(){var t,e=this,n=performance.now(),i=0,r=function(){for(t=performance.now(),i+=Math.min(1,(t-n)/1e3);i>e.frameLengthSeconds;)i-=e.frameLengthSeconds,e.update();n=t,e.render(),e.animationFrameId=requestAnimationFrame(r)};this.animationFrameId=requestAnimationFrame(r)},t.prototype.stop=function(){cancelAnimationFrame(this.animationFrameId)},t.prototype.update=function(){var t=this;this.gameObjects.forEach((function(e){var n=i.getCollisions(t.gameObjects,e);e.update(n)}))},t.prototype.render=function(){this.renderContext.clear(),this.gameObjects.forEach((function(t){return t.render()}))},t.prototype.addGameObject=function(t){this.gameObjects.push(t)},t}();e.RenderLoop=r},54:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Simulation=void 0,n(344);var o=n(45),a=n(874),s=n(681),c=n(776),h=n(712),u=n(843),l=n(507),d=n(834),p=n(796),f=n(574),g=function(){function t(){var t=this;this.assetsManager=new p.AssetsManager,this.renderContext=new s.RenderContext(l.CONFIG.CANVAS_SELECTOR),this.renderLoop=new o.RenderLoop({renderContext:this.renderContext}),this.camera=new c.Camera({renderContext:this.renderContext}),this.rocket=new a.Rocket({renderContext:this.renderContext,assetsManager:this.assetsManager,camera:this.camera}),this.camera.setTarget(this.rocket),this.renderLoop.addGameObject(new d.Sky({renderContext:this.renderContext,assetsManager:this.assetsManager,camera:this.camera})),this.renderLoop.addGameObject(new u.Wall({renderContext:this.renderContext,x:-100-l.CONFIG.CAMERA.INITIAL_X,height:5e3,width:100,camera:this.camera,assetsManager:this.assetsManager})),f.repeat(l.CONFIG.WALLS.REPEAT_TIMES,(function(e){t.renderLoop.addGameObject(new u.Wall({renderContext:t.renderContext,x:l.CONFIG.WALLS.OFFSET_X+l.CONFIG.WALLS.DISTANCE*e,height:l.CONFIG.WALLS.HEIGHT,width:l.CONFIG.WALLS.WIDTH,camera:t.camera,assetsManager:t.assetsManager}))})),this.renderLoop.addGameObject(new h.Ground({renderContext:this.renderContext,assetsManager:this.assetsManager,camera:this.camera})),this.renderLoop.addGameObject(this.rocket),this.renderLoop.addGameObject(this.camera)}return t.prototype.init=function(){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.assetsManager.waitUntilLoaded()];case 1:return t.sent(),[2]}}))}))},t.prototype.start=function(){this.renderLoop.start()},t.prototype.stop=function(){this.renderLoop.stop()},t.prototype.render=function(){this.renderLoop.render()},t.prototype.update=function(){this.renderLoop.update()},t.prototype.getRocketPosition=function(){return{x:this.camera.simulationXToViewportX(this.rocket.x),y:this.camera.simulationYToViewportY(this.rocket.y)}},t.prototype.setRocketPosition=function(t){this.rocket.setPosition({x:this.camera.viewportXToSimulationX(t.x),y:this.camera.viewportYToSimulationY(t.y)})},t.prototype.getRocketAngle=function(){return this.rocket.getCurrentAngle()},t.prototype.getRocketInitialAngle=function(){return this.rocket.getInitialAngle()},t.prototype.getRocketSpeed=function(){return this.rocket.getSpeed()},t.prototype.setRocketSpeed=function(t){return this.rocket.setSpeed(t)},t.prototype.setRocketAngle=function(t){this.rocket.setAngle(t)},t.prototype.getCameraXOffset=function(){return this.camera.x},t.prototype.getSimulationSpeed=function(){return this.rocket.getSimulationSpeed()},t.prototype.setSimulationSpeed=function(t){this.rocket.setSimulationSpeed(t)},t}();e.Simulation=g},776:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var i=n(507),r=function(){function t(t){var e=t.renderContext;this.initialX=i.CONFIG.CAMERA.INITIAL_X,this.x=i.CONFIG.CAMERA.INITIAL_X,this.initialY=i.CONFIG.CAMERA.INITIAL_Y,this.y=i.CONFIG.CAMERA.INITIAL_Y,this.width=0,this.height=0,this.collidable=!1,this.collides=!1,this.renderContext=e}return t.prototype.setTarget=function(t){this.target=t},t.prototype.update=function(){if(this.target){var t,e=0,n=this.renderContext.getWidth()-this.renderContext.getWidth()*i.CONFIG.CAMERA.MAX_TARGET_OFFSET_X_PERCENT;this.target.x>=n?e=n-this.target.x:this.target.x<=i.CONFIG.CAMERA.MIN_TARGET_OFFSET_X&&(e=this.target.x-i.CONFIG.CAMERA.MIN_TARGET_OFFSET_X-this.initialX);var r=this.renderContext.getHeight()-i.CONFIG.CAMERA.MAX_TARGET_OFFSET_Y;t=this.target.y>=r?this.initialY+this.target.y-r:this.initialY,this.x=(this.x*i.CONFIG.CAMERA.TRANSITION_COEF+e)/(i.CONFIG.CAMERA.TRANSITION_COEF+1),this.y=(this.y*i.CONFIG.CAMERA.TRANSITION_COEF+t)/(i.CONFIG.CAMERA.TRANSITION_COEF+1)}},t.prototype.simulationYToViewportY=function(t){return this.renderContext.getHeight()-t+this.y},t.prototype.simulationXToViewportX=function(t){return t+this.x},t.prototype.viewportXToSimulationX=function(t){return t-this.x},t.prototype.viewportYToSimulationY=function(t){return this.renderContext.getHeight()+this.y-t},t.prototype.render=function(){},t}();e.Camera=r},712:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Ground=void 0;var r=i(n(963)),o=function(){function t(t){var e=t.renderContext,n=t.assetsManager,i=t.camera;this.x=-100,this.y=0,this.collidable=!0,this.height=100,this.width=0,this.collides=!1,this.renderContext=e,this.camera=i,this.img=n.register(r.default),this.calculateSize()}return t.prototype.render=function(){this.calculateSize();var t=this.renderContext.getContext();t.save(),t.translate(this.camera.simulationXToViewportX(0),this.camera.simulationYToViewportY(0)),t.fillStyle=t.createPattern(this.img,"repeat"),t.fillRect(this.x,this.y,this.width,this.height),t.restore()},t.prototype.update=function(){},t.prototype.calculateSize=function(){this.width=this.renderContext.getWidth()-this.camera.x+100},t}();e.Ground=o},874:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Rocket=void 0;var r=n(619),o=i(n(432)),a=n(643),s=n(507),c=function(){function t(t){var e=t.assetsManager,n=t.renderContext,i=t.camera;this.x=s.CONFIG.ROCKET.INITIAL_X,this.initialX=s.CONFIG.ROCKET.INITIAL_X,this.y=s.CONFIG.ROCKET.INITIAL_Y,this.initialY=s.CONFIG.ROCKET.INITIAL_Y,this.initialAngle=s.CONFIG.ROCKET.INITIAL_ANGLE,this.currentAngle=s.CONFIG.ROCKET.INITIAL_ANGLE,this.speed=s.CONFIG.ROCKET.INITIAL_SPEED,this.timeSinceStart=0,this.width=s.CONFIG.ROCKET.WIDTH,this.height=s.CONFIG.ROCKET.HEIGHT,this.collidable=!0,this.collides=!0,this.simulationSpeed=s.CONFIG.ROCKET.SIMULATION_SPEED,this.renderContext=n,this.camera=i,this.img=e.register(o.default)}return t.prototype.update=function(t){var e=this,n=this.initialAngle>90&&this.initialAngle<270;this.currentAngle=r.radiansToDegrees(r.atan((this.speed*r.sin(this.initialAngle)-s.CONFIG.GRAVITY_FORCE*this.timeSinceStart)/(this.speed*r.cos(this.initialAngle)))),t.forEach((function(t){t.type===a.CollisionType.BOTTOM&&(e.y+=t.diffY,e.initialX=e.x,e.initialY=e.y,e.initialAngle=r.normalizeAngle(n?180-e.currentAngle:-e.currentAngle)),t.type===a.CollisionType.RIGHT&&(e.initialX=e.x-t.diffX,e.initialY=e.y,e.initialAngle=r.normalizeAngle(180-e.currentAngle)),t.type===a.CollisionType.LEFT&&(e.initialX=e.x+t.diffX,e.initialY=e.y,e.initialAngle=r.normalizeAngle(-e.currentAngle))})),t.length&&(this.timeSinceStart=0,this.speed*=s.CONFIG.ROCKET.COLLISION_SPEED_MULTIPLIER),this.x=this.initialX+this.speed*this.timeSinceStart*r.cos(this.initialAngle),this.y=this.initialY+this.speed*this.timeSinceStart*r.sin(this.initialAngle)-.5*s.CONFIG.GRAVITY_FORCE*Math.pow(this.timeSinceStart,2),this.speed<=s.CONFIG.ROCKET.MINIMAL_SPEED&&(this.speed=0),this.speed<=s.CONFIG.ROCKET.SPEED_TO_FIX_ANGLE&&(this.currentAngle=0),this.timeSinceStart+=1/60*this.simulationSpeed*s.CONFIG.ROCKET.SIMULATION_SPEED_MULTIPLIER},t.prototype.render=function(){var t=this.renderContext.getContext();t.save(),t.translate(this.camera.simulationXToViewportX(this.x),this.camera.simulationYToViewportY(this.y)),t.rotate(r.degreesToRadians(r.denormalizeAngle(this.currentAngle,this.initialAngle))),t.drawImage(this.img,-this.width/2,-this.height/2,this.width,this.height),t.restore()},t.prototype.setPosition=function(t){this.initialX=t.x,this.initialY=t.y,this.x=t.x,this.y=t.y,this.timeSinceStart=0,this.initialAngle=this.currentAngle},t.prototype.getCurrentAngle=function(){return this.currentAngle},t.prototype.getInitialAngle=function(){return this.initialAngle},t.prototype.getSpeed=function(){return this.speed},t.prototype.getSimulationSpeed=function(){return this.simulationSpeed},t.prototype.setSimulationSpeed=function(t){this.simulationSpeed=t},t.prototype.setSpeed=function(t){this.initialX=this.x,this.initialY=this.y,this.timeSinceStart=0,this.initialAngle=this.currentAngle,this.speed=t},t.prototype.setAngle=function(t){this.initialX=this.x,this.initialY=this.y,this.timeSinceStart=0,this.initialAngle=t,this.currentAngle=t},t}();e.Rocket=c},834:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sky=void 0;var r=i(n(789)),o=n(507),a=function(){function t(t){var e=t.renderContext,n=t.assetsManager,i=t.camera;this.x=0,this.y=0,this.collidable=!1,this.height=0,this.width=0,this.collides=!1,this.renderContext=e,this.camera=i,this.img=n.register(r.default),this.calculateSize()}return t.prototype.render=function(){this.calculateSize();var t=this.renderContext.getContext();t.save(),t.translate(this.camera.simulationXToViewportX(0),-this.height/2+this.camera.y),t.fillStyle=t.createPattern(this.img,"repeat"),t.fillRect(this.x-o.CONFIG.CAMERA.INITIAL_X,this.y,this.width,this.height),t.restore()},t.prototype.update=function(){},t.prototype.calculateSize=function(){this.width=2*this.renderContext.getWidth()-this.camera.x,this.height=2e4},t}();e.Sky=a},843:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Wall=void 0;var r=i(n(43)),o=function(){function t(t){var e=t.renderContext,n=t.height,i=t.width,o=t.x,a=t.camera,s=t.assetsManager;this.collidable=!0,this.collides=!1,this.renderContext=e,this.x=o,this.y=n,this.width=i,this.height=n,this.camera=a,this.img=s.register(r.default)}return t.prototype.update=function(){},t.prototype.render=function(){var t=this.renderContext.getContext();t.fillStyle=t.createPattern(this.img,"repeat"),t.fillRect(this.camera.simulationXToViewportX(this.x),this.camera.simulationYToViewportY(this.y),this.width,this.height),t.fill()},t}();e.Wall=o},675:function(t,e){var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};function i(t,e,n){return t.addEventListener(e,n),function(){return t.removeEventListener(e,n)}}function r(t,e){Object.entries(e).forEach((function(e){var n=e[0];e[1]?t.classList.add(n):t.classList.remove(n)}))}function o(t,e){t&&Object.entries(e).forEach((function(e){var n=e[0],i=e[1];t.style[n]="number"==typeof i?i+"px":i}))}Object.defineProperty(e,"__esModule",{value:!0}),e.onMove=e.enhanceDom=void 0,e.enhanceDom=function(t){var a=document.querySelector(t),s=Object.create(null);function c(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.apply(void 0,n([a],e)),s}}return s.element=a,s.classNames=c(r),s.css=c(o),s.onMove=c(e.onMove),s.on=c(i),s},e.onMove=function(t,e){t&&i(t,"mousedown",(function(t){var n=t.clientX,r=t.clientY,o=0,a=0,s=i(document,"mousemove",(function(t){o=t.clientX-n,a=t.clientY-r,"function"==typeof e&&e({x:n+o,y:r+a,xDiff:o,yDiff:a})})),c=i(document,"mouseup",(function(){s(),c()}))}))}},574:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=e.pipe=void 0,e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}},e.repeat=function(t,e){return new Array(t).fill(0).forEach((function(t,n){return e(n)}))}},619:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeAngle=e.getOnePointAngle=e.denormalizeAngle=e.atan=e.sin=e.cos=e.radiansToDegrees=e.degreesToRadians=void 0;var i=n(574);function r(t,e){var n={};return function(i){var r=Number(i.toFixed(e)),o=r;if(n[o])return n[o];var a=t(r);return n[o]=a,a}}function o(t){return t*(Math.PI/180)}function a(t){return 180*t/Math.PI}e.degreesToRadians=o,e.radiansToDegrees=a,e.cos=r(i.pipe(o,Math.cos),0),e.sin=r(i.pipe(o,Math.sin),0),e.atan=r(Math.atan,2),e.denormalizeAngle=function(t,e){var n=90-t;return e&&e>90&&e<270&&e!==t&&(n+=180),n<0&&(n=360+n),n%360},e.getOnePointAngle=function(t,e){var n=a(Math.atan2(e.y-t.y,e.x-t.x));return n<0?-n:360-n},e.normalizeAngle=function(t){var e=t;return t<0&&(e=360+t),e%360},new Array(360).fill(0).forEach((function(t,n){e.cos(n),e.sin(n)})),new Array(400).fill(0).forEach((function(t,n){e.atan(.01*n-2)}))},479:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.AppView=void 0;var s=n(217),c=n(507),h=n(675),u=n(619),l={arrow:".js-arrow",mover:".js-mover",startButton:".js-start",pauseButton:".js-pause",container:".js-root",arrowHead:".js-arrow-head",speedIndicator:".js-speed-indicator",angleIndicator:".js-angle-indicator",distanceIndicator:".js-distance-indicator",speedInput:".js-speed-input"},d=function(t){function e(e){var n=t.call(this,{rocketPosition:e.getRocketPosition(),rocketAngle:e.getRocketAngle(),rocketInitialAngle:e.getRocketInitialAngle(),rocketSpeed:e.getRocketSpeed(),simulationSpeed:e.getSimulationSpeed(),cameraXOffset:e.getCameraXOffset(),running:!1})||this;return n.elements={},n.simulation=e,n}return r(e,t),e.prototype.refreshData=function(){this.setState({rocketPosition:this.simulation.getRocketPosition(),rocketAngle:this.simulation.getRocketAngle(),rocketInitialAngle:this.simulation.getRocketInitialAngle(),cameraXOffset:this.simulation.getCameraXOffset(),rocketSpeed:this.simulation.getRocketSpeed(),simulationSpeed:this.simulation.getSimulationSpeed()})},e.prototype.init=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.attachEventListeners(),[4,this.simulation.init()];case 1:return t.sent(),this.simulation.render(),this.render(),[2]}}))}))},e.prototype.attachEventListeners=function(){var t=this;Object.entries(l).forEach((function(e){var n=e[0],i=e[1];t.elements[n]=h.enhanceDom(i)})),window.addEventListener("resize",(function(){t.simulation.render(),t.refreshData()})),this.elements.startButton.on("click",this.handleStart.bind(this)),this.elements.pauseButton.on("click",this.handlePause.bind(this)),this.elements.speedInput.on("change",this.handleSimulationSpeedChange.bind(this)),this.elements.mover.onMove(this.handleRocketMove.bind(this)),this.elements.arrowHead.onMove(this.handleSpeedChange.bind(this))},e.prototype.handleSimulationSpeedChange=function(t){var e=Number(t.target.value);e>c.CONFIG.ROCKET.MAX_SIMULATION_SPEED&&(e=c.CONFIG.ROCKET.MAX_SIMULATION_SPEED),e<c.CONFIG.ROCKET.MIN_SIMULATION_SPEED&&(e=c.CONFIG.ROCKET.MIN_SIMULATION_SPEED),this.setState({simulationSpeed:e}),this.simulation.setSimulationSpeed(e)},e.prototype.handleStart=function(){this.simulation.start(),this.setState({running:!0}),this.updateIntervalId=setInterval(this.refreshData.bind(this),c.CONFIG.VIEW_REFRESH_SPEED_MS)},e.prototype.handlePause=function(){this.simulation.stop(),this.setState({running:!1}),clearInterval(this.updateIntervalId),this.refreshData()},e.prototype.handleRocketMove=function(t){this.simulation.setRocketPosition(this.normalizeMovePosition(t)),this.simulation.render(),this.refreshData()},e.prototype.handleSpeedChange=function(t){var e=Math.sqrt(Math.pow(t.x-this.state.rocketPosition.x,2)+Math.pow(t.y-this.state.rocketPosition.y,2))/c.CONFIG.MOVE_ARROW.MAX_HEIGHT*c.CONFIG.MOVE_ARROW.MAX_SPEED;e<c.CONFIG.MOVE_ARROW.MIN_SPEED&&(e=c.CONFIG.MOVE_ARROW.MIN_SPEED),e>c.CONFIG.MOVE_ARROW.MAX_SPEED&&(e=c.CONFIG.MOVE_ARROW.MAX_SPEED);var n=u.getOnePointAngle(this.state.rocketPosition,t);this.setState({rocketSpeed:e,rocketAngle:n,rocketInitialAngle:n}),this.simulation.setRocketSpeed(e),this.simulation.setRocketAngle(n),this.simulation.render()},e.prototype.normalizeMovePosition=function(t){var e=t.x,n=t.y,i=c.CONFIG.ROCKET.WIDTH/2+c.CONFIG.ROCKET.INITIAL_X,r=window.innerHeight+c.CONFIG.CAMERA.INITIAL_Y;return t.x<i&&(e=i),t.y>r&&(n=r),{x:e,y:n}},e.prototype.render=function(){var t=this;this.effect((function(){t.elements.arrow.css({left:t.state.rocketPosition.x,top:t.state.rocketPosition.y}),t.elements.mover.css({left:t.state.rocketPosition.x,top:t.state.rocketPosition.y,width:c.CONFIG.ROCKET.WIDTH,height:c.CONFIG.ROCKET.HEIGHT})}),["rocketPosition"],!this.state.running),this.effect((function(){t.elements.container.classNames({running:t.state.running,"root--loading":!1})}),["running"]),this.effect((function(){t.elements.arrow.css({height:c.CONFIG.MOVE_ARROW.MIN_HEIGHT+(c.CONFIG.MOVE_ARROW.MAX_HEIGHT-c.CONFIG.MOVE_ARROW.MIN_HEIGHT)/c.CONFIG.MOVE_ARROW.MAX_SPEED*t.state.rocketSpeed,transform:"translateY(-100%) rotate("+u.denormalizeAngle(t.state.rocketAngle,t.state.rocketInitialAngle)+"deg)"})}),["rocketAngle","rocketSpeed","rocketInitialAngle"],!this.state.running),this.effect((function(){t.elements.speedIndicator.element.innerText=t.state.rocketSpeed.toFixed(0)}),["rocketSpeed"]),this.effect((function(){var e=u.denormalizeAngle(u.denormalizeAngle(t.state.rocketAngle,t.state.rocketInitialAngle));t.elements.angleIndicator.element.innerText=e.toFixed(0)}),["rocketAngle"]),this.effect((function(){t.elements.distanceIndicator.element.innerText=(t.state.rocketPosition.x-c.CONFIG.ROCKET.INITIAL_X-t.state.cameraXOffset).toFixed(0)}),["rocketPosition.x","cameraXOffset"]),this.elements.speedInput.element.value=String(this.state.simulationSpeed)},e}(s.Component);e.AppView=d},217:function(t,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var i=function(){function t(t){this.state=t}return t.prototype.setState=function(t){this.prevState=this.state,this.state=n(n({},this.state),t),this.render()},t.prototype.isStateEntryChanged=function(t){if(void 0===this.state)return!1;if(void 0===this.prevState)return!0;var e=function(t,e){return e.split(".").reduce((function(t,e){return t[e]}),t)};return e(this.state,t)!==e(this.prevState,t)},t.prototype.isStateEntriesChanged=function(t){var e=this;return void 0===t&&(t=[]),t.reduce((function(t,n){return t||e.isStateEntryChanged(n)}),!1)},t.prototype.effect=function(t,e,n){void 0===n&&(n=!0),n&&this.isStateEntriesChanged(e)&&t()},t.prototype.render=function(){},t}();e.Component=i}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n(582)})();